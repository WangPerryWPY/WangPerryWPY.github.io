<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.2.0',
    sidebar: {"position":"left","display":"always","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="è¿›ç¨‹å’Œçº¿ç¨‹ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ã€‚åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªæ²¡æœ‰ç”Ÿå‘½çš„å®ä½“ï¼Œåªæœ‰è¿è¡Œä¹‹åï¼Œæ‰èƒ½æˆä¸ºä¸€ä¸ªæ´»åŠ¨çš„å®ä½“ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹ã€‚ è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•å…ƒã€‚è¿›ç¨‹åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹é€ æˆå½±å“ã€‚ çº¿ç¨‹æ˜¯ç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ‰æ˜¯ç¨‹åºçœŸæ­£çš„æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£ä»£ç çš„æ‰§è¡Œã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS || Grand Central Dispatch (GCD)">
<meta property="og:url" content="http://yoursite.com/2019/07/11/Dispatch/index.html">
<meta property="og:site_name" content="PerryWangğŸåšå®¢">
<meta property="og:description" content="è¿›ç¨‹å’Œçº¿ç¨‹ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ã€‚åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªæ²¡æœ‰ç”Ÿå‘½çš„å®ä½“ï¼Œåªæœ‰è¿è¡Œä¹‹åï¼Œæ‰èƒ½æˆä¸ºä¸€ä¸ªæ´»åŠ¨çš„å®ä½“ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹ã€‚ è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•å…ƒã€‚è¿›ç¨‹åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹é€ æˆå½±å“ã€‚ çº¿ç¨‹æ˜¯ç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ‰æ˜¯ç¨‹åºçœŸæ­£çš„æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£ä»£ç çš„æ‰§è¡Œã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-07-10T16:33:08.487Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS || Grand Central Dispatch (GCD)">
<meta name="twitter:description" content="è¿›ç¨‹å’Œçº¿ç¨‹ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ã€‚åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªæ²¡æœ‰ç”Ÿå‘½çš„å®ä½“ï¼Œåªæœ‰è¿è¡Œä¹‹åï¼Œæ‰èƒ½æˆä¸ºä¸€ä¸ªæ´»åŠ¨çš„å®ä½“ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹ã€‚ è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•å…ƒã€‚è¿›ç¨‹åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹é€ æˆå½±å“ã€‚ çº¿ç¨‹æ˜¯ç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ‰æ˜¯ç¨‹åºçœŸæ­£çš„æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£ä»£ç çš„æ‰§è¡Œã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹">



  <link rel="alternate" href="/atom.xml" title="PerryWangğŸåšå®¢" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://yoursite.com/2019/07/11/Dispatch/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>iOS || Grand Central Dispatch (GCD) | PerryWangğŸåšå®¢</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">PerryWangğŸåšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">åˆ†äº«è½¯ä»¶å¼€å‘ä¸­å­¦åˆ°çš„ç‚¹æ»´çŸ¥è¯†</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>å…³äº</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/WangPerryWPY" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/11/Dispatch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PerryWang">
      <meta itemprop="description" content="sysu-student">
      <meta itemprop="image" content="/images/å¤´åƒ.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PerryWangğŸåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">iOS || Grand Central Dispatch (GCD)

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-07-11 00:19:38 / ä¿®æ”¹æ—¶é—´ï¼š00:33:08" itemprop="dateCreated datePublished" datetime="2019-07-11T00:19:38+08:00">2019-07-11</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">è¯„è®ºæ•°ï¼š</span>
                <a href="/2019/07/11/Dispatch/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/07/11/Dispatch/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
                 é˜…è¯»æ¬¡æ•°ï¼š 
                <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
              </span>
            </span>
          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">12k</span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="è¿›ç¨‹å’Œçº¿ç¨‹ï¼š"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹ï¼š" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹ï¼š"></a>è¿›ç¨‹å’Œçº¿ç¨‹ï¼š</h3><p>è¿›ç¨‹æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ã€‚åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªæ²¡æœ‰ç”Ÿå‘½çš„å®ä½“ï¼Œåªæœ‰è¿è¡Œä¹‹åï¼Œæ‰èƒ½æˆä¸ºä¸€ä¸ªæ´»åŠ¨çš„å®ä½“ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹ã€‚</p>
<p><strong>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•å…ƒ</strong>ã€‚è¿›ç¨‹åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹é€ æˆå½±å“ã€‚</p>
<p><strong>çº¿ç¨‹æ˜¯ç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½</strong>ï¼Œçº¿ç¨‹æ‰æ˜¯ç¨‹åºçœŸæ­£çš„æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£ä»£ç çš„æ‰§è¡Œã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜èµ„æºã€‚çº¿ç¨‹æ²¡æœ‰å•ç‹¬çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªçº¿ç¨‹å´©æºƒæ•´ä¸ªè¿›ç¨‹å°±ä¼šå´©æºƒã€‚</p>
<h3 id="å¤šçº¿ç¨‹ï¼š"><a href="#å¤šçº¿ç¨‹ï¼š" class="headerlink" title="å¤šçº¿ç¨‹ï¼š"></a>å¤šçº¿ç¨‹ï¼š</h3><p>äº‹å®ä¸Šï¼ŒåŒä¸€æ—¶é—´å†…å•æ ¸CPUåªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œå¤šçº¿ç¨‹æ˜¯CPUå¿«é€Ÿçš„åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´è¿›è¡Œåˆ‡æ¢(è°ƒåº¦)ï¼Œé€ æˆäº†å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œçš„å‡è±¡ã€‚å¦‚æœæ˜¯å¤šæ ¸CPUå°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªçº¿ç¨‹äº†ã€‚å¤šçº¿ç¨‹æ˜¯ä¸ºäº†åŒæ­¥å®Œæˆå¤šé¡¹ä»»åŠ¡ï¼Œæé«˜ç³»ç»Ÿçš„èµ„æºåˆ©ç”¨ç‡æ¥æé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</p>
<p>ä½†æ˜¯å¤šçº¿ç¨‹ä¹Ÿä¼šé€ æˆå„ç§é—®é¢˜ï¼Œæ¯”å¦‚å¤šä¸ªçº¿ç¨‹æ›´æ–°ç›¸åŒçš„èµ„æºä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´(æ•°æ®ç«äº‰)ï¼Œåœæ­¢ç­‰å¾…äº‹ä»¶çš„çº¿ç¨‹ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹ç›¸äº’æŒç»­ç­‰å¾…(æ­»é”)ã€ä½¿ç”¨å¤ªå¤šçº¿ç¨‹ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ç­‰ã€‚</p>
<h3 id="å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ï¼š"><a href="#å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ï¼š" class="headerlink" title="å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ï¼š"></a>å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ï¼š</h3><p>å¤šçº¿ç¨‹å¯ä»¥æé«˜ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ•ˆç‡ã€‚</p>
<p>ç¼ºç‚¹æ˜¯å¼€å¯å¤šçº¿ç¨‹è¦èŠ±è´¹æ—¶é—´å’Œç©ºé—´ï¼Œå¼€å¯è¿‡å¤šçš„çº¿ç¨‹åè€Œä¼šé™ä½æ€§èƒ½ï¼Œcpué¢‘ç¹åœ°åœ¨å¤šä¸ªçº¿ç¨‹ä¸­è°ƒåº¦ä¼šæ¶ˆè€—å¤§é‡çš„CPUèµ„æºï¼ŒæŠŠCPUç´¯æ­»ã€‚</p>
<h3 id="å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ï¼š"><a href="#å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ï¼š" class="headerlink" title="å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ï¼š"></a>å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ï¼š</h3><p>å®é™…å¼€å‘ä¸­å°†ä¸€äº›è€—æ—¶çš„æ“ä½œæ”¾åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œiosä¸­é»˜è®¤æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œç”¨æ¥å“åº”ç”¨æˆ·çš„æ‰‹åŠ¿å’Œåˆ·æ–°UIï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œä¼šæŠŠé¡µé¢å¡æ­»ï¼Œç›´åˆ°æ‰§è¡Œå®Œäº†è¿™ä¸ªæ“ä½œæ‰èƒ½æ“ä½œç•Œé¢ã€‚ä¸€å®šè¦åœ¨ä¸»çº¿ç¨‹åˆ·æ–°UIçš„åŸå› ï¼šiOSä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œå¤šçº¿ç¨‹æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œåœ¨å­çº¿ç¨‹åˆ·æ–°UIå¯èƒ½å¯¼è‡´æœªçŸ¥é”™è¯¯ã€‚</p>
<h3 id="iOSä¸­å¤šçº¿ç¨‹çš„æ–¹æ¡ˆï¼Œå„è‡ªç‰¹ç‚¹ï¼š"><a href="#iOSä¸­å¤šçº¿ç¨‹çš„æ–¹æ¡ˆï¼Œå„è‡ªç‰¹ç‚¹ï¼š" class="headerlink" title="iOSä¸­å¤šçº¿ç¨‹çš„æ–¹æ¡ˆï¼Œå„è‡ªç‰¹ç‚¹ï¼š"></a>iOSä¸­å¤šçº¿ç¨‹çš„æ–¹æ¡ˆï¼Œå„è‡ªç‰¹ç‚¹ï¼š</h3><p>Pthreadæ˜¯ç”¨cè¯­è¨€å®ç°çš„ï¼Œåº•å±‚çš„å¤šçº¿ç¨‹å®ç°æ–¹æ¡ˆï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ(æ‰‹åŠ¨åˆ›å»ºå’Œé”€æ¯)ã€‚</p>
<p><strong>NSThread</strong> é¢å‘å¯¹è±¡ï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹ï¼Œä½†ä¸éœ€è¦æ‰‹åŠ¨é”€æ¯ã€‚å­çº¿ç¨‹é—´é€šä¿¡å¾ˆéš¾ã€‚</p>
<p>Cocoaæ¡†æ¶æä¾›äº†NSObjectç±»çš„<strong>performSelectorInBackground</strong>:withObject å®ä¾‹æ–¹æ³•å’Œ <strong>performSelectorOnMainThread</strong> å®ä¾‹æ–¹æ³•ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>) launchThreadByNSObject_performSelectorInBackground_withObject</span><br><span class="line">&#123;</span><br><span class="line">    [self performSelectorInBackground:@selector(doWork) withObject:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)doWork</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ....</span></span><br><span class="line">    <span class="comment">// åšä¸€äº›è€—æ—¶æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®åº“è®¿é—®ç­‰ã€‚</span></span><br><span class="line">    [self performSelectorOnMainThread:@selector(doneWork) withObject:nil waitUntilDone:NO];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)doneWork</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// åˆ·æ–°ä¸»ç•Œé¢</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>GCD</strong>æ˜¯å¼‚æ­¥æ‰§è¡Œä»»åŠ¡çš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä¸€èˆ¬å°†ç¨‹åºä¸­è®°è¿°çš„çº¿ç¨‹ç®¡ç†ç”¨çš„ä»£ç åœ¨ç³»ç»Ÿçº§ä¸­å®ç°ã€‚å¼€å‘è€…åªéœ€è¦å®šä¹‰æƒ³æ‰§è¡Œçš„ä»»åŠ¡å¹¶è¿½åŠ åˆ°é€‚å½“çš„Dispatch Queueä¸­ï¼ŒGCDå°±èƒ½ç”Ÿæˆå¿…è¦çš„çº¿ç¨‹å¹¶è®¡åˆ’æ‰§è¡Œä»»åŠ¡ã€‚ç”±äºçº¿ç¨‹ç®¡ç†æ˜¯ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†æ¥å®ç°çš„ï¼Œå› æ­¤å¯åŒæ„ç®¡ç†ï¼Œä¹Ÿå¯æ‰§è¡Œä»»åŠ¡ï¼Œè¿™æ ·å°±æ¯”ä»¥å‰çš„çº¿ç¨‹æ›´æœ‰æ•ˆç‡ã€‚</p>
<p>ä½¿ç”¨GCDå®ç°ä¸Šè¿°åŠŸèƒ½æ›´ä¸ºç®€æ´ã€‚å……åˆ†åˆ©ç”¨äº†è®¾å¤‡çš„å¤šæ ¸ï¼Œè‡ªåŠ¨ç®¡ç†çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼Œæ›´ä¸ºé«˜æ•ˆã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    é•¿æ—¶é—´å¤„ç†ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®åº“è®¿é—®ç­‰ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        <span class="comment">/*ç•Œé¢åˆ·æ–°ç­‰åªåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„å¤„ç†*/</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="GCDçš„API"><a href="#GCDçš„API" class="headerlink" title="GCDçš„API"></a>GCDçš„API</h3><h4 id="Dispatch-Queue"><a href="#Dispatch-Queue" class="headerlink" title="Dispatch Queue"></a>Dispatch Queue</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * æƒ³è¦æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Dispatch Queue å°±æ˜¯æ‰§è¡Œå¤„ç†çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œç¨‹åºå‘˜åœ¨Blockè¯­æ³•å†…è®°è¿°æƒ³æ‰§è¡Œçš„å¤„ç†å¹¶å°†å…¶è¿½åŠ åˆ°Dispatch Queueä¸­ã€‚Dispatch Queue æŒ‰ç…§è¿½åŠ çš„é¡ºåº(å…ˆè¿›å…ˆå‡ºFIFO) æ‰§è¡Œå¤„ç†ã€‚</p>
<p>å¦å¤–åœ¨æ‰§è¡Œå¤„ç†æ—¶å­˜åœ¨ä¸¤ç§Dispatch Queueï¼Œä¸€ç§æ˜¯ç­‰å¾…ç°åœ¨æ‰§è¡Œä¸­å¤„ç†çš„ Serial Dispatch Queueï¼Œå®ƒåªä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼›å¦ä¸€ç§æ˜¯ä¸ç­‰å¾…ç°åœ¨æ‰§è¡Œä¸­å¤„ç†çš„ Concurrent Dispatch Queueï¼Œå®ƒä½¿ç”¨å¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œå¤šä¸ªè¿½åŠ å¤„ç†ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸¤ç§é˜Ÿåˆ—çš„æµ‹è¯•ç»“æœï¼š</p>
<ul>
<li><strong>Serial</strong>ï¼š</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_queue_create(<span class="string">"hahaha"</span>, DISPATCH_QUEUE_SERIAL);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"1"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"2"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"3"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"4"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"5"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"6"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"7"</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">31</span>:<span class="number">53.990446</span>+<span class="number">0800</span> Test[<span class="number">6938</span>:<span class="number">245001</span>] <span class="number">1</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">31</span>:<span class="number">53.990629</span>+<span class="number">0800</span> Test[<span class="number">6938</span>:<span class="number">245001</span>] <span class="number">2</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">31</span>:<span class="number">53.990718</span>+<span class="number">0800</span> Test[<span class="number">6938</span>:<span class="number">245001</span>] <span class="number">3</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">31</span>:<span class="number">53.990780</span>+<span class="number">0800</span> Test[<span class="number">6938</span>:<span class="number">245001</span>] <span class="number">4</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">31</span>:<span class="number">53.990856</span>+<span class="number">0800</span> Test[<span class="number">6938</span>:<span class="number">245001</span>] <span class="number">5</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">31</span>:<span class="number">53.990936</span>+<span class="number">0800</span> Test[<span class="number">6938</span>:<span class="number">245001</span>] <span class="number">6</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">31</span>:<span class="number">53.991013</span>+<span class="number">0800</span> Test[<span class="number">6938</span>:<span class="number">245001</span>] <span class="number">7</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Concurrent</strong>ï¼š</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_queue_create(<span class="string">"hahaha"</span>, DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"1"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"2"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"3"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"4"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"5"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"6"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"7"</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">30</span>:<span class="number">34.914632</span>+<span class="number">0800</span> Test[<span class="number">6904</span>:<span class="number">243733</span>] <span class="number">3</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">30</span>:<span class="number">34.914632</span>+<span class="number">0800</span> Test[<span class="number">6904</span>:<span class="number">243732</span>] <span class="number">1</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">30</span>:<span class="number">34.914633</span>+<span class="number">0800</span> Test[<span class="number">6904</span>:<span class="number">243702</span>] <span class="number">2</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">30</span>:<span class="number">34.914649</span>+<span class="number">0800</span> Test[<span class="number">6904</span>:<span class="number">243734</span>] <span class="number">4</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">30</span>:<span class="number">34.914686</span>+<span class="number">0800</span> Test[<span class="number">6904</span>:<span class="number">243738</span>] <span class="number">5</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">20</span>:<span class="number">30</span>:<span class="number">34.914722</span>+<span class="number">0800</span> Test[<span class="number">6904</span>:<span class="number">243739</span>] <span class="number">6</span></span><br></pre></td></tr></table></figure>

<h4 id><a href="#" class="headerlink" title=" "></a> </h4><h4 id="ç³»ç»Ÿæ ‡å‡†æä¾›çš„Dispatch-Queue"><a href="#ç³»ç»Ÿæ ‡å‡†æä¾›çš„Dispatch-Queue" class="headerlink" title="ç³»ç»Ÿæ ‡å‡†æä¾›çš„Dispatch Queue"></a>ç³»ç»Ÿæ ‡å‡†æä¾›çš„Dispatch Queue</h4><p>åˆ†åˆ«æ˜¯<code>Main Dispatch Queue</code> å’Œ <code>Global Dispatch Queue</code></p>
<p><code>Main Dispatch Queue</code> æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„Dispatch Queueï¼Œä¸»çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å®ƒè‡ªç„¶ä¹Ÿæ˜¯Serial Dispatch Queueã€‚</p>
<p>å¦ä¸€ä¸ªæ˜¯<code>Global Dispatch Queue</code>ï¼Œå®ƒæ˜¯æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½èƒ½ä½¿ç”¨çš„Concurrent Dispatch Queueã€‚</p>
<p><code>Global Dispatch Queue</code>æœ‰å››ä¸ªæ‰§è¡Œä¼˜å…ˆçº§ï¼Œåˆ†åˆ«æ˜¯é«˜ä¼˜å…ˆçº§(High Priority)ã€é»˜è®¤ä¼˜å…ˆçº§(Default Priority)ã€ä½ä¼˜å…ˆçº§(Low Priority)å’Œåå°ä¼˜å…ˆçº§(Background Priority)ã€‚</p>
<h4 id="dispatch-set-target-queue"><a href="#dispatch-set-target-queue" class="headerlink" title="dispatch_set_target_queue"></a>dispatch_set_target_queue</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_queue_create(<span class="string">"Test"</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">dispatch_queue_t</span> globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, <span class="number">0</span>);</span><br><span class="line">    dispatch_set_target_queue(<span class="built_in">queue</span>, globalQueue);</span><br></pre></td></tr></table></figure>

<p><code>dispatch_set_target_queue</code> å¯ä»¥å˜æ›´å¤„ç†çš„ä¼˜å…ˆçº§ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿˜å¯ä»¥ä½œæˆDispatch Queue çš„æ‰§è¡Œé˜¶å±‚ã€‚å¦‚æœåœ¨å¤šä¸ª Serial Dispatch Queue ä¸­ç”¨dispatch_set_target_queue å‡½æ•°æŒ‡å®šç›®æ ‡ä¸ºæŸä¸€ä¸ª Serial Dispatch Queueï¼Œé‚£ä¹ˆåŸæœ¬åº”å¹¶è¡Œæ‰§è¡Œçš„å¤šä¸ªSerial Dispatch Queueï¼Œåœ¨ç›®æ ‡Serial Dispatch Queueä¸Šåªèƒ½åŒæ—¶æ‰§è¡Œä¸€ä¸ªå¤„ç†ã€‚</p>
<p>åœ¨å¿…é¡»å°†ä¸å¯å¹¶è¡Œæ‰§è¡Œçš„å¤„ç†è¿½åŠ åˆ°å¤šä¸ª Serial Dispatch Queue ä¸­æ—¶ï¼Œå¦‚æœä½¿ç”¨dispatch_set_target_queue å‡½æ•°å°†ç›®æ ‡æŒ‡å®šä¸ºæŸä¸€ä¸ª Serial Dispatch Queueï¼Œå³å¯é˜²æ­¢å¤„ç†å¹¶è¡Œæ‰§è¡Œã€‚</p>
<h4 id="dispatch-after"><a href="#dispatch-after" class="headerlink" title="dispatch_after"></a>dispatch_after</h4><p>æƒ³åœ¨å‡ ç§’åæ‰§è¡Œæ“ä½œï¼Œå¯é€šè¿‡dispatch_after å‡½æ•°æ¥å®ç°ã€‚</p>
<p>åœ¨3ç§’åå°†æŒ‡å®šçš„ Block è¿½åŠ åˆ° <code>Main Dispatch Queue</code>ä¸­æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_time_t</span> time = dispatch_time(DISPATCH_TIME_NOW, <span class="number">3u</span>ll * NSEC_PER_SEC);</span><br><span class="line"></span><br><span class="line">dispatch_after(time, dispatch_get_main_queue(), ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"Wait at least three seconds."</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>PS</strong>: dispatch_afterå‡½æ•°å¹¶ä¸æ˜¯åœ¨æŒ‡å®šçš„æ—¶é—´åæ‰§è¡Œå¤„ç†ï¼Œè€Œæ˜¯åœ¨æŒ‡å®šæ—¶é—´è¿½åŠ å¤„ç†åˆ°Dispatch Queueã€‚</p>
<h4 id="Dispatch-Group"><a href="#Dispatch-Group" class="headerlink" title="Dispatch Group"></a>Dispatch Group</h4><p>åœ¨è¿½åŠ åˆ° <code>Dispatch Queue</code> ä¸­çš„å¤šä¸ªå¤„ç†å…¨éƒ¨ç»“æŸåæƒ³æ‰§è¡Œç»“æŸå¤„ç†ï¼Œè¿™ç§æƒ…å†µä¼šç»å¸¸å‡ºç°ã€‚</p>
<p>åªä½¿ç”¨ä¸€ä¸ªSerial Dispatch Queue æ—¶ï¼Œåªè¦å°†æƒ³æ‰§è¡Œçš„å¤„ç†å…¨éƒ¨è¿½åŠ åˆ°è¯¥Serial Dispatch Queue ä¸­å¹¶åœ¨æœ€åè¿½åŠ ç»“æŸå¤„ç†ï¼Œå³å¯å®ç°ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨Concurrent Dispatch Queueæ—¶æˆ–åŒæ—¶ä½¿ç”¨å¤šä¸ªDispatch Queueæ—¶ï¼Œæºä»£ç å°±ä¼šå˜å¾—å¤æ‚ã€‚</p>
<p>è¿™æ˜¯å¯ä»¥ä½¿ç”¨Dispatch Groupã€‚å¦‚ä¸‹æ‰€ç¤ºï¼šè¿½åŠ 3ä¸ªBlockåˆ°Global Dispatch Queueï¼Œè¿™äº›Blockå¦‚æœå…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šæ‰§è¡ŒMain Dispatch Queue ä¸­ç»“æŸå¤„ç†ç”¨çš„Blockã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">dispatch_group_t</span> group = dispatch_group_create();</span><br><span class="line"></span><br><span class="line">dispatch_group_async(group, <span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"1"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_group_async(group, <span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"2"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_group_async(group, <span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"3"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;</span><br><span class="line">    self.Label.text = @<span class="string">"å®Œæˆ"</span>;</span><br><span class="line">    NSLog(@<span class="string">"hahaha"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>è¿è¡Œç»“æœï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">28</span>:<span class="number">10.728780</span>+<span class="number">0800</span> Test[<span class="number">7538</span>:<span class="number">275043</span>] <span class="number">3</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">28</span>:<span class="number">10.728780</span>+<span class="number">0800</span> Test[<span class="number">7538</span>:<span class="number">275044</span>] <span class="number">1</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">28</span>:<span class="number">10.728780</span>+<span class="number">0800</span> Test[<span class="number">7538</span>:<span class="number">275041</span>] <span class="number">2</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">28</span>:<span class="number">10.738775</span>+<span class="number">0800</span> Test[<span class="number">7538</span>:<span class="number">274962</span>] hahaha</span><br></pre></td></tr></table></figure>

<h4 id="dispatch-barrier-async"><a href="#dispatch-barrier-async" class="headerlink" title="dispatch_barrier_async"></a>dispatch_barrier_async</h4><p>è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨Serial Dispatch Queue å¯é¿å…æ•°æ®ç«äº‰é—®é¢˜ã€‚</p>
<p>å†™å…¥å¤„ç†ç¡®å®ä¸å¯ä¸å…¶ä»–çš„å†™å…¥å¤„ç†ä»¥åŠåŒ…å«è¯»å–å¤„ç†çš„å…¶ä»–æŸäº›å¤„ç†å¹¶è¡Œæ‰§è¡Œã€‚ä½†æ˜¯å¦‚æœè¯»å–å¤„ç†åªæ˜¯ä¸è¯»å–å¤„ç†å¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆå¤šä¸ªå¹¶è¡Œæ‰§è¡Œå°±ä¸ä¼šå‘ç”Ÿé—®é¢˜ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†é«˜æ•ˆç‡åœ°è¿›è¡Œè®¿é—®ï¼Œè¯»å–å¤„ç†è¿½åŠ åˆ° Concurrent Dispatch Queue ä¸­ï¼Œå†™å…¥å¤„ç†åœ¨ä»»ä¸€ä¸ªè¯»å–å¤„ç†æ²¡æœ‰æ‰§è¡Œçš„çŠ¶æ€ä¸‹ï¼Œè¿½åŠ åˆ° Serial Dispatch Queue ä¸­å³å¯ (åœ¨å†™å…¥å¤„ç†ç»“æŸä¹‹å‰ï¼Œè¯»å–å¤„ç†ä¸å¯æ‰§è¡Œ)ã€‚</p>
<p>åˆ©ç”¨Dispatch Group å’Œ dispatch_set_target_queue å‡½æ•°å¯å®ç°ï¼Œä½†æ˜¯æºä»£ç ä¼šå¾ˆå¤æ‚ã€‚</p>
<p>æˆ‘ä»¬å¯ä½¿ç”¨ dispatch_barrier_async å‡½æ•°åŒ dispatch_queue_create å‡½æ•°ç”Ÿæˆçš„ Concurrent Dispatch Queue ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>æ¯”å¦‚è¯´å¦‚ä¸‹ä»£ç å¯ç­‰å¾…123readå¹¶è¡Œæ‰§è¡Œå®Œä¹‹åï¼Œå†æ‰§è¡Œwriteæ“ä½œï¼Œç„¶åæ­¤æ—¶åªæ‰§è¡Œå”¯ä¸€çš„writeæ“ä½œï¼Œç­‰writeæ“ä½œæ‰§è¡Œå®Œåï¼Œå†æ‰§è¡Œ4567readæ“ä½œã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_queue_create(<span class="string">"Test"</span>, DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"1read %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"2read %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"3read %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_barrier_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"write %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">   NSLog(@<span class="string">"4read %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"5read %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"6read %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"7read %@"</span>, [NSThread currentThread]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186307</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288931</span>] <span class="number">1</span>read &lt;NSThread: <span class="number">0x600002378180</span>&gt;</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186309</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288934</span>] <span class="number">2</span>read &lt;NSThread: <span class="number">0x600002378140</span>&gt;</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186320</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288935</span>] <span class="number">3</span>read &lt;NSThread: <span class="number">0x600002374900</span>&gt;</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186454</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288935</span>] write &lt;NSThread: <span class="number">0x600002374900</span>&gt;</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186538</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288935</span>] <span class="number">4</span>read &lt;NSThread: <span class="number">0x600002374900</span>&gt;</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186551</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288934</span>] <span class="number">5</span>read &lt;NSThread: <span class="number">0x600002378140</span>&gt;</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186553</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288931</span>] <span class="number">6</span>read &lt;NSThread: <span class="number">0x600002378180</span>&gt;</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">21</span>:<span class="number">54</span>:<span class="number">05.186569</span>+<span class="number">0800</span> Test[<span class="number">7809</span>:<span class="number">288933</span>] <span class="number">7</span>read &lt;NSThread: <span class="number">0x600002374940</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="dispatch-sync"><a href="#dispatch-sync" class="headerlink" title="dispatch_sync"></a>dispatch_sync</h4><p>æ„å‘³ç€åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å°†æŒ‡å®šçš„BlockåŒæ­¥è¿½åŠ åˆ° Dispatch Queue ä¸­ã€‚åœ¨è¿½åŠ çš„ Block ç»“æŸä¹‹å‰ï¼Œdispatch_sync å‡½æ•°ä¼šä¸€ç›´ç­‰å¾…ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">dispatch_sync(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * æ‰§è¡Œå¤„ç†</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦è°ƒç”¨ dispatch_sync å‡½æ•°ï¼Œé‚£ä¹ˆåœ¨æŒ‡å®šçš„å¤„ç†æ‰§è¡Œç»“æŸä¹‹å‰ï¼Œè¯¥å‡½æ•°ä¸ä¼šè¿”å›ã€‚dispatch_sync å‡½æ•°å¯ç®€åŒ–ä¸ºæºä»£ç ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ç®€åŒ–ç‰ˆçš„dispatch_group_waitå‡½æ•°ã€‚</p>
<p>ä½† dispatch_sync å‡½æ•°ä¹Ÿå¾ˆå®¹æ˜“å¼•èµ·æ­»é”ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_get_main_queue();</span><br><span class="line">dispatch_sync(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    NSLog(@<span class="string">"hahaha"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡ŒæŒ‡å®šçš„Blockå¹¶ç­‰å¾…å…¶æ‰§è¡Œç»“æŸã€‚è€Œå…¶å®åœ¨ä¸»çº¿ç¨‹ä¸­æ­£åœ¨æ‰§è¡Œè¿™äº›æºä»£ç ï¼Œæ‰€ä»¥æ— æ³•è¿½åŠ åˆ°ä¸»çº¿ç¨‹ä¸­åŒæ­¥æ‰§è¡ŒBlockã€‚ä¹Ÿå°±æ˜¯è¯´å‡è®¾ä¸»çº¿ç¨‹æ˜¯TaskAï¼ŒåŠ å…¥çš„çº¿ç¨‹æ˜¯TaskBï¼Œå› ä¸ºæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥TaskAæ²¡æœ‰æ‰§è¡Œå®Œçš„è¯ï¼ŒTaskBä¸ä¼šæ‰§è¡Œï¼Œè€ŒTaskAæ‰§è¡Œå®Œå¿…ç„¶æ„å‘³ç€TaskBä¹Ÿè¦æ‰§è¡Œå®Œæˆã€‚æ‰€ä»¥å‘ç”Ÿäº†æ­»é”ã€‚</p>
<p>åŒæ ·åœ¨Serial Dispatch Queue ä¸­ä¹Ÿä¼šå¼•èµ·ç›¸åŒçš„é—®é¢˜</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_queue_create(<span class="string">"hahaha"</span>, <span class="literal">NULL</span>);</span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    dispatch_sync(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        NSLog(@<span class="string">"haha"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="dispatch-apply"><a href="#dispatch-apply" class="headerlink" title="dispatch_apply"></a>dispatch_apply</h4><p>dispatch_apply æ˜¯ dispatch_sync å‡½æ•°å’Œ Dispatch Group çš„å…³è” APIã€‚è¯¥å‡½æ•°æŒ‰æŒ‡å®šçš„æ¬¡æ•°å°†æŒ‡å®šçš„Block è¿½åŠ åˆ°æŒ‡å®šçš„ Dispatch Queue ä¸­ï¼Œå¹¶ç­‰å¾…å…¨éƒ¨å¤„ç†æ‰§è¡Œç»“æŸã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">dispatch_apply(<span class="number">5</span>, <span class="built_in">queue</span>, ^(<span class="keyword">size_t</span> index) &#123;</span><br><span class="line">    NSLog(@<span class="string">"%zu"</span>, index);</span><br><span class="line">&#125;);</span><br><span class="line">NSLog(@<span class="string">"done"</span>);</span><br></pre></td></tr></table></figure>

<p><strong>ç»“æœå¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">31</span>:<span class="number">20.492494</span>+<span class="number">0800</span> Test[<span class="number">8500</span>:<span class="number">325942</span>] <span class="number">0</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">31</span>:<span class="number">20.492496</span>+<span class="number">0800</span> Test[<span class="number">8500</span>:<span class="number">326017</span>] <span class="number">2</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">31</span>:<span class="number">20.492494</span>+<span class="number">0800</span> Test[<span class="number">8500</span>:<span class="number">326018</span>] <span class="number">1</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">31</span>:<span class="number">20.492495</span>+<span class="number">0800</span> Test[<span class="number">8500</span>:<span class="number">326019</span>] <span class="number">4</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">31</span>:<span class="number">20.492499</span>+<span class="number">0800</span> Test[<span class="number">8500</span>:<span class="number">326023</span>] <span class="number">3</span></span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">31</span>:<span class="number">20.492637</span>+<span class="number">0800</span> Test[<span class="number">8500</span>:<span class="number">325942</span>] done</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºåœ¨Global Dispatch Queue ä¸­æ‰§è¡Œå¤„ç†ï¼Œæ‰€ä»¥å„ä¸ªå¤„ç†çš„æ‰§è¡Œæ—¶é—´ä¸å®šã€‚ä½†æ˜¯è¾“å‡ºç»“æœä¸­çš„doneå¿…å®šåœ¨æœ€åçš„ä½ç½®ä¸Šã€‚è¿™æ˜¯å› ä¸ºdispatch_apply å‡½æ•°ä¼šç­‰å¾…å…¨éƒ¨å¤„ç†æ‰§è¡Œç»“æŸã€‚</p>
<h4 id="dispatch-suspend-dispatch-resume"><a href="#dispatch-suspend-dispatch-resume" class="headerlink" title="dispatch_suspend / dispatch_resume"></a>dispatch_suspend / dispatch_resume</h4><p>å½“è¿½åŠ å¤§é‡å¤„ç†åˆ° Dispatch Queue æ—¶ï¼Œåœ¨è¿½åŠ å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å¸Œæœ›ä¸æ‰§è¡Œå·²è¿½åŠ çš„å¤„ç†ã€‚ä¾‹å¦‚æ¼”ç®—ç»“æœè¢«Blockæˆªè·æ—¶ï¼Œä¸€äº›å¤„ç†ä¼šå¯¹è¿™ä¸ªæ¼”ç®—ç»“æœé€ æˆå½±å“ã€‚</p>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œåªè¦æŒ‚èµ·æŒ‡å®šçš„ Dispatch Queueã€‚å½“å¯ä»¥æ‰§è¡Œæ—¶å†æ¢å¤ã€‚</p>
<p>dispatch_suspend æŒ‚èµ·å’Œ dispatch_resume æ¢å¤ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_queue_create(<span class="string">"com.test.gcd"</span>, DISPATCH_QUEUE_SERIAL);</span><br><span class="line"><span class="comment">//æäº¤ç¬¬ä¸€ä¸ªblockï¼Œå»¶æ—¶5ç§’æ‰“å°ã€‚</span></span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    sleep(<span class="number">5</span>);</span><br><span class="line">    NSLog(@<span class="string">"After 5 seconds..."</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//æäº¤ç¬¬äºŒä¸ªblockï¼Œä¹Ÿæ˜¯å»¶æ—¶5ç§’æ‰“å°</span></span><br><span class="line">dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">    sleep(<span class="number">5</span>);</span><br><span class="line">    NSLog(@<span class="string">"After 5 seconds again..."</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//å»¶æ—¶ä¸€ç§’</span></span><br><span class="line">NSLog(@<span class="string">"sleep 1 second..."</span>);</span><br><span class="line">sleep(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//æŒ‚èµ·é˜Ÿåˆ—</span></span><br><span class="line">NSLog(@<span class="string">"suspend..."</span>);</span><br><span class="line">dispatch_suspend(<span class="built_in">queue</span>);</span><br><span class="line"><span class="comment">//å»¶æ—¶10ç§’</span></span><br><span class="line">NSLog(@<span class="string">"sleep 10 second..."</span>);</span><br><span class="line">sleep(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//æ¢å¤é˜Ÿåˆ—</span></span><br><span class="line">NSLog(@<span class="string">"resume..."</span>);</span><br><span class="line">dispatch_resume(<span class="built_in">queue</span>);</span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">44</span>:<span class="number">01.254454</span>+<span class="number">0800</span> Test[<span class="number">8617</span>:<span class="number">332248</span>] sleep <span class="number">1</span> second...</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">44</span>:<span class="number">02.255484</span>+<span class="number">0800</span> Test[<span class="number">8617</span>:<span class="number">332248</span>] suspend...</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">44</span>:<span class="number">02.255662</span>+<span class="number">0800</span> Test[<span class="number">8617</span>:<span class="number">332248</span>] sleep <span class="number">10</span> second...</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">44</span>:<span class="number">06.257416</span>+<span class="number">0800</span> Test[<span class="number">8617</span>:<span class="number">332298</span>] After <span class="number">5</span> seconds...</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">44</span>:<span class="number">12.256036</span>+<span class="number">0800</span> Test[<span class="number">8617</span>:<span class="number">332248</span>] resume...</span><br><span class="line"><span class="number">2019</span><span class="number">-06</span><span class="number">-03</span> <span class="number">23</span>:<span class="number">44</span>:<span class="number">17.257411</span>+<span class="number">0800</span> Test[<span class="number">8617</span>:<span class="number">332297</span>] After <span class="number">5</span> seconds again...</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºdispatch_suspendå¹¶ä¸ä¼šç«‹å³æš‚åœæ­£åœ¨è¿è¡Œçš„blockï¼Œè€Œæ˜¯åœ¨å½“å‰blockæ‰§è¡Œå®Œæˆåï¼Œæš‚åœåç»­çš„blockæ‰§è¡Œã€‚</p>
<h4 id="Dispatch-Semaphore"><a href="#Dispatch-Semaphore" class="headerlink" title="Dispatch Semaphore"></a>Dispatch Semaphore</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">dispatch_semaphore_t</span> semaphore = dispatch_semaphore_create(<span class="number">1</span>);</span><br><span class="line">NSMutableArray *<span class="built_in">array</span> = [[NSMutableArray alloc] init];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</span><br><span class="line">        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);</span><br><span class="line">        <span class="comment">// æ‰§è¡Œåˆ°æ­¤å¤„semaphoreçš„å€¼æ’ä¸º0</span></span><br><span class="line">        [<span class="built_in">array</span> addObject: [NSNumber numberWithInt:i]];</span><br><span class="line">    	<span class="comment">// æ’ä»–æ§åˆ¶ç»“æŸ</span></span><br><span class="line">        <span class="comment">// é€šè¿‡dispatch_semaphore_signal å‡½æ•°å°†semaphoreè®¡æ•°å€¼åŠ 1</span></span><br><span class="line">        <span class="comment">// ç”±æœ€å…ˆé€šè¿‡waitå‡½æ•°ç­‰å¾…semaphoreè®¡æ•°å€¼åŠ ä¸€çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚</span></span><br><span class="line">        dispatch_semaphore_signal(semaphore);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">NSLog(@<span class="string">"å®Œæˆ"</span>);</span><br></pre></td></tr></table></figure>

<p>Â·<code>dispatch_semaphore_wait</code>å‡½æ•°ä¼šä¸€ç›´ç­‰å¾…ç›´åˆ°semaphoreä¿¡å·é‡å€¼å˜ä¸º1ï¼Œç”±äºsemaphoreçš„è®¡æ•°å€¼å¤§äºç­‰äº1ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶è®¡æ•°å€¼å‡å»1ï¼Œwaitå‡½æ•°æ‰§è¡Œè¿”å›ã€‚æ‰€ä»¥æ‰æœ‰ä¸Šé¢æ³¨é‡Šçš„æ’ä¸º0çš„æ„æ€ã€‚</p>
<h4 id="dispatch-once"><a href="#dispatch-once" class="headerlink" title="dispatch_once"></a>dispatch_once</h4><p>ä¿è¯åœ¨åº”ç”¨ç¨‹åºä¸­åªæ‰§è¡Œä¸€æ¬¡æŒ‡å®šå¤„ç†çš„APIã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">dispatch_once_t</span> pred;</span><br><span class="line">dispatch_once (&amp;pred, ^&#123;</span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment">   * åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å•ä¾‹æ¨¡å¼ã€‚</p>
<h4 id="Dispatch-I-O"><a href="#Dispatch-I-O" class="headerlink" title="Dispatch I/O"></a>Dispatch I/O</h4><p>è¯»å–å¤§æ–‡ä»¶æ—¶ï¼Œå¦‚æœå°†æ–‡ä»¶åˆ†æˆåˆé€‚å¤§å°å¹¶ä½¿ç”¨ Global Dispatch Queue å¹¶åˆ—è¯»å–çš„è¯ï¼Œä¼šå¢åŠ è¯»å–é€Ÿåº¦ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 0 ï½ 8191 å­—èŠ‚ */</span>&#125;);</span><br><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 8192 ï½ 16383 å­—èŠ‚ */</span>&#125;);</span><br><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 16384 ï½ 24575 å­—èŠ‚ */</span>&#125;);</span><br><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 24576 ï½ 32767 å­—èŠ‚ */</span>&#125;);</span><br><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 32769 ï½ 40959 å­—èŠ‚ */</span>&#125;);</span><br><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 40960 ï½ 49151 å­—èŠ‚ */</span>&#125;);</span><br><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 49152 ï½ 57343 å­—èŠ‚ */</span>&#125;);</span><br><span class="line">dispatch_async(queeu, ^&#123;<span class="comment">/* è¯»å– 57344 ï½ 65535 å­—èŠ‚ */</span>&#125;);</span><br></pre></td></tr></table></figure>

<p>å¯åƒä¸Šé¢è¿™æ ·ï¼Œå°†æ–‡ä»¶åˆ†å‰²ä¸ºä¸€å—ä¸€å—åœ°è¿›è¡Œè¯»å–å¤„ç†ã€‚åˆ†å‰²è¯»å–çš„æ•°æ®é€šè¿‡ä½¿ç”¨Dispatch Data å¯æ›´ä¸ºç®€å•åœ°è¿›è¡Œç»“åˆå’Œåˆ†å‰²ã€‚</p>
<p>ä»£ç è§£è¯»å¯å‚è€ƒï¼š<a href="https://www.jianshu.com/p/da4710d76d33" target="_blank" rel="noopener">https://www.jianshu.com/p/da4710d76d33</a></p>

      
    </div>

    

    
    
    

    

    
      
    
    

    
      <div>
        




  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>PerryWang</li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    
    <a href="http://yoursite.com/2019/07/11/Dispatch/" title="iOS || Grand Central Dispatch (GCD)">http://yoursite.com/2019/07/11/Dispatch/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li>
</ul>

      </div>
    
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------æœ¬æ–‡ç»“æŸ<i class="fa fa-paw"></i>æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------</div>
    
</div>


      
    </div>

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/07/11/iOS-Blocks/" rel="next" title="iOS || Blocks">
                <i class="fa fa-chevron-left"></i> iOS || Blocks
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/07/11/RuntimeåŸç†åŠåº”ç”¨/" rel="prev" title="RuntimeåŸç†åŠåº”ç”¨">
                RuntimeåŸç†åŠåº”ç”¨ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/å¤´åƒ.png" alt="PerryWang">
            
              <p class="site-author-name" itemprop="name">PerryWang</p>
              <div class="site-description motion-element" itemprop="description">sysu-student</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">89</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">15</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/WangPerryWPY" title="GitHub &rarr; https://github.com/WangPerryWPY" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://blog.csdn.net/perry0528" title="CSDN &rarr; https://blog.csdn.net/perry0528" rel="noopener" target="_blank"><i class="fa fa-fw fa-crosshairs"></i>CSDN</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:1731611872@qq.com" title="E-Mail &rarr; mailto:1731611872@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#è¿›ç¨‹å’Œçº¿ç¨‹ï¼š"><span class="nav-number">1.</span> <span class="nav-text">è¿›ç¨‹å’Œçº¿ç¨‹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤šçº¿ç¨‹ï¼š"><span class="nav-number">2.</span> <span class="nav-text">å¤šçº¿ç¨‹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ï¼š"><span class="nav-number">3.</span> <span class="nav-text">å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ï¼š"><span class="nav-number">4.</span> <span class="nav-text">å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOSä¸­å¤šçº¿ç¨‹çš„æ–¹æ¡ˆï¼Œå„è‡ªç‰¹ç‚¹ï¼š"><span class="nav-number">5.</span> <span class="nav-text">iOSä¸­å¤šçº¿ç¨‹çš„æ–¹æ¡ˆï¼Œå„è‡ªç‰¹ç‚¹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GCDçš„API"><span class="nav-number">6.</span> <span class="nav-text">GCDçš„API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Dispatch-Queue"><span class="nav-number">6.1.</span> <span class="nav-text">Dispatch Queue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">6.2.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç³»ç»Ÿæ ‡å‡†æä¾›çš„Dispatch-Queue"><span class="nav-number">6.3.</span> <span class="nav-text">ç³»ç»Ÿæ ‡å‡†æä¾›çš„Dispatch Queue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-set-target-queue"><span class="nav-number">6.4.</span> <span class="nav-text">dispatch_set_target_queue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-after"><span class="nav-number">6.5.</span> <span class="nav-text">dispatch_after</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dispatch-Group"><span class="nav-number">6.6.</span> <span class="nav-text">Dispatch Group</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-barrier-async"><span class="nav-number">6.7.</span> <span class="nav-text">dispatch_barrier_async</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-sync"><span class="nav-number">6.8.</span> <span class="nav-text">dispatch_sync</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-apply"><span class="nav-number">6.9.</span> <span class="nav-text">dispatch_apply</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-suspend-dispatch-resume"><span class="nav-number">6.10.</span> <span class="nav-text">dispatch_suspend / dispatch_resume</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dispatch-Semaphore"><span class="nav-number">6.11.</span> <span class="nav-text">Dispatch Semaphore</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-once"><span class="nav-number">6.12.</span> <span class="nav-text">dispatch_once</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dispatch-I-O"><span class="nav-number">6.13.</span> <span class="nav-text">Dispatch I/O</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Perry</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    
    <span title="ç«™ç‚¹æ€»å­—æ•°">515k</span>
  

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="æ€»è®¿å®¢é‡">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="æ€»è®¿é—®é‡">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>




  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  
  
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unjkp.com/valine/dist/Valine.min.js"></script>  
  <script src="/js/src/Valine.min.js"></script> 

    
  
  <script src="/js/src/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'SsAWGcn6CHm6Oif4CGFKBhVv-gzGzoHsz',
        appKey: 'bniDOuxQuzVdGASyS3SyDFF8',
        placeholder: 'è¯´ç‚¹ä»€ä¹ˆå§ï¼',
        avatar:'wavatar',
        guest_info:['nick'] ,  
        pageSize:'10' || 10,
    });
    var infoEle = document.querySelector('#comments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0){
      infoEle.childNodes.forEach(function(item) {
        item.parentNode.removeChild(item);
      });
    }
  </script>




  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  


  
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body>
</html>
